<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png"><link rel="icon" type="image/png" href="/img/avatar.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#7BB0B3"><meta name="description" content="一个简单的网站,分享各种资源技巧，如有侵权，请联系删除"><meta name="author" content="Domye"><meta name="keywords" content="学习,知识,动漫,教程,资源,Android,Hexo,化学,语文,数学,英语,物理,化学,Windows,娱乐,系统,精简,网站,分享,名言,去广告,阅读,软件,影视"><title>Hexo博客推荐安装的插件 - Domyeの小屋</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/themes/prism-tomorrow.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/plugins/line-numbers/prism-line-numbers.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/1.css"><link rel="stylesheet" href="/css/2.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/tags.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/font-awesome-animation.min.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"domye.gitee.io",root:"/",version:"1.8.7",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!1,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"touch",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!0,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,onlypost:!1},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Domyeの小屋" type="application/atom+xml"></head><body><script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>Domyeの小屋</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> 找文章</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档 </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类 </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-bookmark-fill"></i> 关注我</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/about/"><i class="iconfont icon-user-fill"></i> 关于 </a><a class="dropdown-item" href="/shuoshuo/"><i class="iconfont icon-comment"></i> 说说 </a><a class="dropdown-item" href="/bangumis/"><i class="iconfont icon-bilibili-fill"></i> 追番</a></div></li><li class="nav-item"><a class="nav-link" href="/random"><i class="iconfont icon-note"></i> 随机文章</a></li><li class="nav-item"><a class="nav-link" href="/page.html"><i class="iconfont icon-map"></i> 导航</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" false style="background:url(https://p.pstatp.com/origin/1387c0000e4c3ebc17c7a) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="Hexo博客推荐安装的插件"></span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Domye </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-01-08 20:21" pubdate>2021 年 1 月 8 日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 3.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 16 分钟</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">Hexo博客推荐安装的插件</h1><div class="markdown-body"><h2 id="SEO-相关"><a href="#SEO-相关" class="headerlink" title="SEO 相关"></a>SEO 相关</h2><h3 id="百度主动提交连接（hexo-baidu-url-submit）"><a href="#百度主动提交连接（hexo-baidu-url-submit）" class="headerlink" title="百度主动提交连接（hexo-baidu-url-submit）"></a>百度主动提交连接（hexo-baidu-url-submit）</h3><p>地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/huiwang/hexo-baidu-url-submit">https://github.com/huiwang/hexo-baidu-url-submit</a></p><p>首先，在 Hexo 根目录下，安装本插件：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
npm install hexo-baidu-url-submit --save</code></pre></div><p>然后，同样在根目录下，把以下内容配置到<code>_config.yml</code> 文件中:</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
baidu_url_submit:
  count: 1000 ## 提交最新的一个链接
  host: alili.tech ## 在百度站长平台中注册的域名
  token: xxxxx ## 请注意这是您的秘钥， 所以请不要把博客源代码发布在公众仓库里!
  path: baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里
  xz_appid: &#39;xxxxxx&#39; ## 你的熊掌号 appid
  xz_token: &#39;xxxxxx&#39; ## 你的熊掌号 token
  xz_count: 10 ## 从所有的提交的数据当中选取最新的10条,该数量跟你的熊掌号而定</code></pre></div><p>其次，记得查看_config.ym 文件中 url 的值， 必须包含是百度站长平台注册的域名（一般有 www）， 比如:</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
# URL
url: http:&#x2F;&#x2F;www.antmoe.com
root: &#x2F;
permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;</code></pre></div><p>最后加入新的 deployer</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
deploy:
- type: baidu_url_submitter # 百度
- type: baidu_xz_url_submitter # 百度熊掌号</code></pre></div><p>实现原理</p><p>推送功能的实现，分为两部分：</p><ul><li>新链接的产生， <code>hexo generate</code> 会产生一个文本文件，里面包含最新的链接</li><li>新链接的提交， <code>hexo deploy</code> 会从上述文件中读取链接，提交至百度搜索引擎</li></ul><h3 id="每天定时提交"><a href="#每天定时提交" class="headerlink" title="每天定时提交"></a>每天定时提交</h3><p>关于这部分，我在网上没有找到合适的插件，于是利用 <code>Leancloud</code> 开发了一款扩展工具。具体方法请参照<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.antmoe.com/posts/2db95804/index.html">这篇文章</a></p><h3 id="文章永久地址"><a href="#文章永久地址" class="headerlink" title="文章永久地址"></a>文章永久地址</h3><p>地址:<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/rozbo/hexo-abbrlink">https://github.com/rozbo/hexo-abbrlink</a></p><p>安装插件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
npm install hexo-abbrlink --save</code></pre></div><p>修改根目录下的配置文件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
permalink: posts&#x2F;:abbrlink.html</code></pre></div><p>在根目录添加如下配置</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
abbrlink:
  alg: crc32  #算法 crc16(default) and crc32
  rep: hex    #进制 dec(default) and hex 十进制和十六进制，默认为10进制。</code></pre></div><p>生成的链接示例</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
crc16 &amp; hex
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;66c8.html

crc16 &amp; dec
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;65535.html
crc32 &amp; hex
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;8ddf18fb.html

crc32 &amp; dec
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;1690090958.html</code></pre></div><h3 id="外链跳转插件"><a href="#外链跳转插件" class="headerlink" title="外链跳转插件"></a>外链跳转插件</h3><p>地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hvnobug/hexo-external-link">https://github.com/hvnobug/hexo-external-link</a></p><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://yafine-blog.cn/go.html?url=aHR0cHM6Ly9ibG9nLmh2bm9idWcuY29tL2dvLmh0bWw/dXJsPWFIUjBjSE02THk5bmFYUm9kV0l1WTI5dEwyaDJibTlpZFdjdmFHVjRieTFsZUhSbGNtNWhiQzFzYVc1cg==">hexo-external-link</a> 是一个跳转外链相关插件。自动为所有 html 文件中外链的 a 标签生成对应的属性。 比如 设置 <code>target=’_blank’, rel=’external nofollow noopener noreferrer’</code> 告诉搜索引擎这是外部链接，不要将该链接计入权重。 同时自动生成外链跳转页面，默认在根目录下 go.html;</p></blockquote><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
## npm 安装 
npm install hexo-external-link --save 
## yarn 安装 
yarn add hexo-external-link</code></pre></div><p>然后在站点根目录的设置中设置如下</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
hexo_external_link: 
  enable: true 
  enable_base64_encode: true 
  url_param_name: &#39;u&#39; 
  html_file_name: &#39;go.html&#39; 
  target_blank: true 
  link_rel: &#39;external nofollow noopener noreferrer&#39; 
  domain: &#39;https:&#x2F;&#x2F;www.antmoe.com&#x2F;&#39; # 如果开启了防盗链 
  safety_chain: true</code></pre></div><ul><li><strong>enable</strong> - 是否开启 <code>hexo_external_link</code> 插件 - 默认 false</li><li><strong>enable_base64_encode</strong> - 是否对跳转 <code>url</code> 使用 <code>base64编码</code> - 默认 fasle</li><li><strong>url_param_name</strong> - url 参数名，在跳转到外链传递给 <code>html_file_name</code> 的参数名 - 默认 ‘u’</li><li><strong>html_file_name</strong> - 跳转到外链的页面文件路径 - 默认 ‘go.html’</li><li><strong>target_blank</strong> - 是否为外链的 <code>a</code> 标签添加 <code>target=&#39;_blank&#39;</code> - 默认 true</li><li><strong>link_rel</strong> - 设置外链的 <code>a</code> 标签的 rel 属性 - 默认 ‘external nofollow noopener noreferrer’</li><li><strong>domain</strong> - 如果开启了防盗链，除了 localhost 和 domain 之外调用会跳到主页，同时也是判断链接是否为外链的依据 - 默认 window.location.host</li><li><strong>safety_chain</strong> - go.html 为了防止外链盗用 对域名进行的判断 - 默认 false</li></ul><h3 id="中文转拼音"><a href="#中文转拼音" class="headerlink" title="中文转拼音"></a>中文转拼音</h3><p>地址 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/viko16/hexo-permalink-pinyin">https://github.com/viko16/hexo-permalink-pinyin</a></p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
npm i hexo-permalink-pinyin --save</code></pre></div><p>然后在站点根目录设置</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">YAML
permalink_pinyin:
  enable: true #是否开启
  separator: &#39;-&#39;   # default: &#39;-&#39;链接符</code></pre></div><h2 id="加载优化"><a href="#加载优化" class="headerlink" title="加载优化"></a>加载优化</h2><h3 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h3><p>地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Troy-Yang/hexo-lazyload-image">https://github.com/Troy-Yang/hexo-lazyload-image</a></p><p>安装</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
npm install hexo-lazyload-image --save</code></pre></div><p>之后在站点配置文件下添加下面的代码：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
lazyload: 
	enable: true # 是否开启图片懒加载 
	onlypost: false # 是否只对文章的图片做懒加载 
	loadingImg: &#x2F;medias&#x2F;loading.gif #显示的图片</code></pre></div><p>如果在 markdown 或 html 中指定 img 标记的属性，也可以禁用延迟进程</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">HTML
&lt;img no-lazy src&#x3D;&quot;abc.png&quot; &#x2F;&gt;</code></pre></div><p>这里推荐给大家机长图片最为候选哦！。</p><p>安装</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
npm install hexo-lazyload-image --save</code></pre></div><p>之后在站点配置文件下添加下面的代码：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
lazyload: 
	enable: true # 是否开启图片懒加载 
	onlypost: false # 是否只对文章的图片做懒加载 
	loadingImg: medias&#x2F;loading.gif</code></pre></div><p>如果在 markdown 或 html 中指定 img 标记的属性，也可以禁用延迟进程</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">HTML
&lt;img no-lazy src&#x3D;&quot;abc.png&quot; &#x2F;&gt;</code></pre></div><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://ws1.sinaimg.cn/large/832afe33ly1gbh4a43va4g209g09gmy4.gif">https://ws1.sinaimg.cn/large/832afe33ly1gbh4a43va4g209g09gmy4.gif</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://ws1.sinaimg.cn/large/832afe33ly1gbh4a49p3xg20r00lc776.gif">https://ws1.sinaimg.cn/large/832afe33ly1gbh4a49p3xg20r00lc776.gif</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://ws1.sinaimg.cn/large/832afe33ly1gbh4a44p6xg20b40b4weq.gif">https://ws1.sinaimg.cn/large/832afe33ly1gbh4a44p6xg20b40b4weq.gif</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://ws1.sinaimg.cn/large/832afe33ly1gbh4a444wwg20ee0d4gmz.gif">https://ws1.sinaimg.cn/large/832afe33ly1gbh4a444wwg20ee0d4gmz.gif</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://ws1.sinaimg.cn/large/832afe33ly1gbh4a44yb4g20m80godif.gif">https://ws1.sinaimg.cn/large/832afe33ly1gbh4a44yb4g20m80godif.gif</a></p><h3 id="代码压缩"><a href="#代码压缩" class="headerlink" title="代码压缩"></a>代码压缩</h3><p>代码压缩 这里有两种方式第一种 通过 gulp 代码压缩方式</p><ol><li><p>进入站点根目录下依次执行下面的命令：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
# 全局安装gulp模块
npm install gulp -g
# 安装各种小功能模块  执行这步的时候，可能会提示权限的问题，最好以管理员模式执行
npm install gulp gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify gulp-imagemin --save
# 额外的功能模块
npm install gulp-debug gulp-clean-css gulp-changed gulp-if gulp-plumber gulp-babel babel-preset-es2015 del @babel&#x2F;core --save</code></pre></div></li><li><p>在 Hexo 根目录新建文件 <code>gulp.js</code>，并复制以下内容到文件中，有中文注释，可以根据自己需求修改。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">JS
var gulp &#x3D; require(&quot;gulp&quot;);
var debug &#x3D; require(&quot;gulp-debug&quot;);
var cleancss &#x3D; require(&quot;gulp-clean-css&quot;); &#x2F;&#x2F;css压缩组件
var uglify &#x3D; require(&quot;gulp-uglify&quot;); &#x2F;&#x2F;js压缩组件
var htmlmin &#x3D; require(&quot;gulp-htmlmin&quot;); &#x2F;&#x2F;html压缩组件
var htmlclean &#x3D; require(&quot;gulp-htmlclean&quot;); &#x2F;&#x2F;html清理组件
var imagemin &#x3D; require(&quot;gulp-imagemin&quot;); &#x2F;&#x2F;图片压缩组件
var changed &#x3D; require(&quot;gulp-changed&quot;); &#x2F;&#x2F;文件更改校验组件
var gulpif &#x3D; require(&quot;gulp-if&quot;); &#x2F;&#x2F;任务 帮助调用组件
var plumber &#x3D; require(&quot;gulp-plumber&quot;); &#x2F;&#x2F;容错组件（发生错误不跳出任务，并报出错误内容）
var isScriptAll &#x3D; true; &#x2F;&#x2F;是否处理所有文件，(true|处理所有文件)(false|只处理有更改的文件)
var isDebug &#x3D; true; &#x2F;&#x2F;是否调试显示 编译通过的文件
var gulpBabel &#x3D; require(&quot;gulp-babel&quot;);
var es2015Preset &#x3D; require(&quot;babel-preset-es2015&quot;);
var del &#x3D; require(&quot;del&quot;);
var Hexo &#x3D; require(&quot;hexo&quot;);
var hexo &#x3D; new Hexo(process.cwd(), &#123;&#125;); &#x2F;&#x2F; 初始化一个hexo对象

&#x2F;&#x2F; 清除public文件夹
gulp.task(&quot;clean&quot;, function () &#123;
    return del([&quot;public&#x2F;**&#x2F;*&quot;]);
&#125;);

&#x2F;&#x2F; 下面几个跟hexo有关的操作，主要通过hexo.call()去执行，注意return
&#x2F;&#x2F; 创建静态页面 （等同 hexo generate）
gulp.task(&quot;generate&quot;, function () &#123;
    return hexo.init().then(function () &#123;
        return hexo
            .call(&quot;generate&quot;, &#123;
                watch: false
            &#125;)
            .then(function () &#123;
                return hexo.exit();
            &#125;)
            .catch(function (err) &#123;
                return hexo.exit(err);
            &#125;);
    &#125;);
&#125;);

&#x2F;&#x2F; 启动Hexo服务器
gulp.task(&quot;server&quot;, function () &#123;
    return hexo
        .init()
        .then(function () &#123;
            return hexo.call(&quot;server&quot;, &#123;&#125;);
        &#125;)
        .catch(function (err) &#123;
            console.log(err);
        &#125;);
&#125;);

&#x2F;&#x2F; 部署到服务器
gulp.task(&quot;deploy&quot;, function () &#123;
    return hexo.init().then(function () &#123;
        return hexo
            .call(&quot;deploy&quot;, &#123;
                watch: false
            &#125;)
            .then(function () &#123;
                return hexo.exit();
            &#125;)
            .catch(function (err) &#123;
                return hexo.exit(err);
            &#125;);
    &#125;);
&#125;);

&#x2F;&#x2F; 压缩public目录下的js文件
gulp.task(&quot;compressJs&quot;, function () &#123;
    return gulp
        .src([&quot;.&#x2F;public&#x2F;**&#x2F;*.js&quot;, &quot;!.&#x2F;public&#x2F;libs&#x2F;**&quot;]) &#x2F;&#x2F;排除的js
        .pipe(gulpif(!isScriptAll, changed(&quot;.&#x2F;public&quot;)))
        .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress JS:&quot; &#125;)))
        .pipe(plumber())
        .pipe(
            gulpBabel(&#123;
                presets: [es2015Preset] &#x2F;&#x2F; es5检查机制
            &#125;)
        )
        .pipe(uglify()) &#x2F;&#x2F;调用压缩组件方法uglify(),对合并的文件进行压缩
        .pipe(gulp.dest(&quot;.&#x2F;public&quot;)); &#x2F;&#x2F;输出到目标目录
&#125;);

&#x2F;&#x2F; 压缩public目录下的css文件
gulp.task(&quot;compressCss&quot;, function () &#123;
    var option &#x3D; &#123;
        rebase: false,
        &#x2F;&#x2F;advanced: true, &#x2F;&#x2F;类型：Boolean 默认：true [是否开启高级优化（合并选择器等）]
        compatibility: &quot;ie7&quot; &#x2F;&#x2F;保留ie7及以下兼容写法 类型：String 默认：&#39;&#39;or&#39;*&#39; [启用兼容模式； &#39;ie7&#39;：IE7兼容模式，&#39;ie8&#39;：IE8兼容模式，&#39;*&#39;：IE9+兼容模式]
        &#x2F;&#x2F;keepBreaks: true, &#x2F;&#x2F;类型：Boolean 默认：false [是否保留换行]
        &#x2F;&#x2F;keepSpecialComments: &#39;*&#39; &#x2F;&#x2F;保留所有特殊前缀 当你用autoprefixer生成的浏览器前缀，如果不加这个参数，有可能将会删除你的部分前缀
    &#125;;
    return gulp
        .src([&quot;.&#x2F;public&#x2F;**&#x2F;*.css&quot;, &quot;!.&#x2F;public&#x2F;**&#x2F;*.min.css&quot;]) &#x2F;&#x2F;排除的css
        .pipe(gulpif(!isScriptAll, changed(&quot;.&#x2F;public&quot;)))
        .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress CSS:&quot; &#125;)))
        .pipe(plumber())
        .pipe(cleancss(option))
        .pipe(gulp.dest(&quot;.&#x2F;public&quot;));
&#125;);

&#x2F;&#x2F; 压缩public目录下的html文件
gulp.task(&quot;compressHtml&quot;, function () &#123;
    var cleanOptions &#x3D; &#123;
        protect: &#x2F;&lt;\!--%fooTemplate\b.*?%--&gt;&#x2F;g, &#x2F;&#x2F;忽略处理
        unprotect: &#x2F;&lt;script [^&gt;]*\btype&#x3D;&quot;text\&#x2F;x-handlebars-template&quot;[\s\S]+?&lt;\&#x2F;script&gt;&#x2F;gi &#x2F;&#x2F;特殊处理
    &#125;;
    var minOption &#x3D; &#123;
        collapseWhitespace: true, &#x2F;&#x2F;压缩HTML
        collapseBooleanAttributes: true, &#x2F;&#x2F;省略布尔属性的值 &lt;input checked&#x3D;&quot;true&quot;&#x2F;&gt; &#x3D;&#x3D;&gt; &lt;input &#x2F;&gt;
        removeEmptyAttributes: true, &#x2F;&#x2F;删除所有空格作属性值 &lt;input id&#x3D;&quot;&quot; &#x2F;&gt; &#x3D;&#x3D;&gt; &lt;input &#x2F;&gt;
        removeScriptTypeAttributes: true, &#x2F;&#x2F;删除&lt;script&gt;的type&#x3D;&quot;text&#x2F;javascript&quot;
        removeStyleLinkTypeAttributes: true, &#x2F;&#x2F;删除&lt;style&gt;和&lt;link&gt;的type&#x3D;&quot;text&#x2F;css&quot;
        removeComments: true, &#x2F;&#x2F;清除HTML注释
        minifyJS: true, &#x2F;&#x2F;压缩页面JS
        minifyCSS: true, &#x2F;&#x2F;压缩页面CSS
        minifyURLs: true &#x2F;&#x2F;替换页面URL
    &#125;;
    return gulp
        .src(&quot;.&#x2F;public&#x2F;**&#x2F;*.html&quot;)
        .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress HTML:&quot; &#125;)))
        .pipe(plumber())
        .pipe(htmlclean(cleanOptions))
        .pipe(htmlmin(minOption))
        .pipe(gulp.dest(&quot;.&#x2F;public&quot;));
&#125;);

&#x2F;&#x2F; 压缩 public&#x2F;medias 目录内图片
gulp.task(&quot;compressImage&quot;, function () &#123;
    var option &#x3D; &#123;
        optimizationLevel: 5, &#x2F;&#x2F;类型：Number 默认：3 取值范围：0-7（优化等级）
        progressive: true, &#x2F;&#x2F;类型：Boolean 默认：false 无损压缩jpg图片
        interlaced: false, &#x2F;&#x2F;类型：Boolean 默认：false 隔行扫描gif进行渲染
        multipass: false &#x2F;&#x2F;类型：Boolean 默认：false 多次优化svg直到完全优化
    &#125;;
    return gulp
        .src(&quot;.&#x2F;public&#x2F;medias&#x2F;**&#x2F;*.*&quot;)
        .pipe(gulpif(!isScriptAll, changed(&quot;.&#x2F;public&#x2F;medias&quot;)))
        .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress Images:&quot; &#125;)))
        .pipe(plumber())
        .pipe(imagemin(option))
        .pipe(gulp.dest(&quot;.&#x2F;public&quot;));
&#125;);
&#x2F;&#x2F; 执行顺序： 清除public目录 -&gt; 产生原始博客内容 -&gt; 执行压缩混淆 -&gt; 部署到服务器
gulp.task(
    &quot;build&quot;,
    gulp.series(
        &quot;clean&quot;,
        &quot;generate&quot;,
        &quot;compressHtml&quot;,
        &quot;compressCss&quot;,
        &quot;compressJs&quot;,
        &quot;compressImage&quot;,
        gulp.parallel(&quot;deploy&quot;)
    )
);

&#x2F;&#x2F; 默认任务
gulp.task(
    &quot;default&quot;,
    gulp.series(
        &quot;clean&quot;,
        &quot;generate&quot;,
        gulp.parallel(&quot;compressHtml&quot;, &quot;compressCss&quot;, &quot;compressJs&quot;,&quot;compressImage&quot;)
    )
);
&#x2F;&#x2F;Gulp4最大的一个改变就是gulp.task函数现在只支持两个参数，分别是任务名和运行任务的函数</code></pre></div></li><li><p>以后的执行方式有两种：</p><ul><li>直接在 Hexo 根目录执行 <code>gulp</code> 或者 <code>gulp default</code> ，这个命令相当于 <code>hexo cl&amp;&amp;hexo g</code> 并且再把代码和图片压缩。</li><li>在 Hexo 根目录执行 <code>gulp build</code> ，这个命令与第 1 种相比是：在最后又加了个 <code>hexo d</code> ，等于说生成、压缩文件后又帮你自动部署了。</li></ul><blockquote><p>值得注意的是：这个加入了图片压缩，如果不想用图片压缩可以把第 154 行的 <code>&quot;compressImage&quot;,</code> 和第 165 行的 <code>,&quot;compressImage&quot;</code> 去掉即可</p></blockquote></li></ol><p>第二种方法通过插件完成，也是我目前使用的方法</p><p>地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/rozbo/hexo-neat">https://github.com/rozbo/hexo-neat</a></p><p>但是这个插件是有 Bug 的：</p><ul><li>压缩 md 文件会使 markdown 语法的代码块消失</li><li>会删除全角空格</li></ul><p>Hexo 根目录执行安装代码：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
npm install hexo-neat --save</code></pre></div><p>在 Hexo 配置文件<code>_config.yml</code> 末尾加入以下配置 (此配置仅针对 Matery 主题)：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
#hexo-neat 优化提速插件（去掉HTML、css、js的blank字符）
neat_enable: true
neat_html:
  enable: true
  exclude:
    - &#39;**&#x2F;*.md&#39;
neat_css:
  enable: true
  exclude:
    - &#39;**&#x2F;*.min.css&#39;
neat_js:
  enable: true
  mangle: true
  output:
  compress:
  exclude:
    - &#39;**&#x2F;*.min.js&#39;
    - &#39;**&#x2F;**&#x2F;instantpage.js&#39;
    - &#39;**&#x2F;matery.js&#39;</code></pre></div><p>当然了 ，如果你是其他主题可以使用网上的通用配置，但我没有尝试过</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
neat_enable: true
neat_html:
  enable: true
  exclude:
neat_css:
  enable: true
  exclude:
    - &#39;*.min.css&#39;
neat_js:
  enable: true
  mangle: true
  output:
  compress:
  exclude:
    - &#39;*.min.js&#39;</code></pre></div><h2 id="扩展优化"><a href="#扩展优化" class="headerlink" title="扩展优化"></a>扩展优化</h2><h3 id="邮件通知"><a href="#邮件通知" class="headerlink" title="邮件通知"></a>邮件通知</h3><p>地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/zhaojun1998/Valine-Admin">https://github.com/zhaojun1998/Valine-Admin</a></p><p>作者博客：<a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.zhaojun.im/hexo-valine-admin/">http://www.zhaojun.im/hexo-valine-admin/</a></p><p>相关配置操作请查看作者博客。这里只说说自定义环境变量及使用阿里云邮件推送</p><ul><li><p><code>SITE_NAME</code> : 网站名称。</p></li><li><p><code>SITE_URL</code> : 网站地址，<strong>最后不要加 <code>/</code> 。</strong></p></li><li><p><code>SMTP_USER</code> : SMTP 服务用户名，一般为邮箱地址。</p></li><li><p><code>SMTP_PASS</code> : SMTP 密码，一般为授权码，而不是邮箱的登陆密码，请自行查询对应邮件服务商的获取方式</p></li><li><p><code>SMTP_SERVICE</code> : 邮件服务提供商，支持 <code>QQ</code>、<code>163</code>、<code>126</code>、<code>Gmail</code>、<code>&quot;Yahoo&quot;</code>、<code>......</code> ，全部支持请参考 : Nodemailer Supported services。</p><p>如 <code>SMTP_SERVICE</code> 中没有你使用的邮件服务提供商，也可以进行自定义。</p><p>参数配置如下:</p><ul><li><code>SMTP_HOST</code> : 邮件服务提供商 SMTP 地址，如 qq : <code>smtp.qq.com</code>，<em>此项需要自行查询或询问其服务商</em>。</li><li><code>SMTP_PORT</code> : 邮件服务提供商 SMTP 端口，<em>此项需要自行查询或询问其服务商</em>。</li><li><code>SMTP_SECURE</code> : 是否启用加密，默认为 <code>true</code>，一般不需要设置，如有特殊请自行配置。 <em>此项需要自行查询或询问其服务商</em>。</li></ul></li><li><p><code>SENDER_NAME</code> : 寄件人名称。</p></li><li><p><code>TEMPLATE_NAME</code>：邮件模板，目前内置了两款主题，分别为 <code>default</code> 与 <code>rainbow</code></p></li></ul><blockquote><p>注：配置自定义邮件服务器的话，请不要同时配置 SMTP_SERVICE。当 SMTP_SERVICE 未配置时才会启用自定义邮件服务</p></blockquote><h4 id="如何使用阿里云邮件推送"><a href="#如何使用阿里云邮件推送" class="headerlink" title="如何使用阿里云邮件推送"></a>如何使用阿里云邮件推送</h4><p>首先在<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.aliyun.com/product/directmail?spm=5176.10695662.1kquk9v2l.1.36a015a5m8fp4Z&aly_as=laPawx1G">阿里云</a>创建好发信地址 类型选择：<strong>触发邮件</strong></p><p>发信地址随便写，然后设置好 SMTP 密码。</p><p>来到我们的 Leancloud</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://tva1.sinaimg.cn/large/832afe33ly1gbh4ulyhhmj20or0gst97.jpg"><img src="https://tva1.sinaimg.cn/large/832afe33ly1gbh4ulyhhmj20or0gst97.jpg" srcset="/img/loading.gif" alt="img"></a></p><p>按照框框圈的设置好自己的配置即可</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">BASH
SMTP_USER:刚刚创建的发信地址
SMTP_PASS：刚刚设置的STMP密码
SMTP_HOST：使用阿里云提供的即可 smtpdm.aliyun.com
SMTP_PORT：我使用的https协议端口465，可以自行选择
SMTP_SECURE：如果没有使用https可以改为false </code></pre></div></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E6%8A%80%E5%B7%A7/">技巧</a> <a class="hover-with-bg" href="/categories/%E6%8A%80%E5%B7%A7/Hexo/">Hexo</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/Hexo/">Hexo</a> <a class="hover-with-bg" href="/tags/course/">教程</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/7228.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">忆2020</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/33010.html"><span class="hidden-mobile">搭建自己的域名邮箱</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments"><div id="vcomments"></div><script type="text/javascript">Fluid.utils.waitElementVisible("vcomments",function(){Fluid.utils.createScript("https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js",function(){new Valine({el:"#vcomments",app_id:"pwo1uHUXHBRX4NEMOunlxBvM-MdYXbMMI",app_key:"aH0GFdLcswE75NUOApOwBGcd",placeholder:"说点什么",path:window.location.pathname,avatar:"retro",meta:["nick","mail","link"],pageSize:"10",lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:""})})})</script><noscript>Please enable JavaScript to view the <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a></noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://domye.gitee.io/page.html" target="_blank" rel="nofollow noopener"><span>Domye</span></a><div><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!0,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/components/prism-core.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t){(0,Fluid.plugins.typing)(t.getElementById("subtitle").title)}((window,document))</script><script src="/js/local-search.js"></script><script>document.querySelector("#local-search-input").onclick=function(){searchFunc("/local-search.xml","local-search-input","local-search-result"),this.onclick=null}</script><script src="/js/boot.js"></script><script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script></body></html><script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script>